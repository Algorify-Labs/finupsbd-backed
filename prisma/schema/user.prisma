enum Role {
  USER
  ADMIN
  SUPER_ADMIN
}

model User {
  id                  String    @id @default(uuid())
  name                String?
  email               String    @unique
  phone               String    @unique
  password            String
  pin                 String?
  pinExpiry           DateTime?
  verificationToken   String? // Token for email verification
  resetPasswordToken  String? // Token for password reset
  resetPasswordExpiry DateTime? // Expiry for password reset token
  role                Role      @default(USER)
  profile             Profile?
  blogPost            Blog[]
  emailVerified       Boolean   @default(false)
  isActive            Boolean   @default(true)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
  lastLogin           DateTime?

  @@index([email]) // Index for email
  @@index([phone]) // Index for phone
  @@map("users") // Maps to the "users" table
}

enum Gender {
  male
  female
  other
}

model Profile {
  id               String   @id @default(uuid())
  nameAsNid        String
  nationalIdNumber String
  gender           Gender
  dateOfBirth      DateTime
  avatar           String? // URL to profile picture
  address          String?
  city             String
  user             User     @relation(fields: [userId], references: [id])
  userId           String   @unique

  @@map("profiles")
}
