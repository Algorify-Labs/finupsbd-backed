enum Role {
  USER
  ADMIN
  SUPER_ADMIN
}

model User {
  id                  String            @id @default(uuid())
  userId              String?
  name                String?
  email               String            @unique
  phone               String            @unique
  password            String
  pin                 String?
  pinExpiry           DateTime?
  verificationToken   String? // Token for email verification
  resetPasswordToken  String? // Token for password reset
  resetPasswordExpiry DateTime? // Expiry for password reset token
  role                Role              @default(USER)
  profile             Profile?
  emailVerified       Boolean           @default(false)
  isActive            Boolean           @default(true)
  createdAt           DateTime          @default(now())
  updatedAt           DateTime          @updatedAt
  lastLogin           DateTime?
  blogPost            Blog[]
  Bank                Bank[]
  ApplicationForm     ApplicationForm[]

  @@index([email]) // Index for email
  @@index([phone]) // Index for phone
  @@index([role])
  @@index([isActive])
  @@map("users") // Maps to the "users" table
}

enum UserGender {
  male
  female
  other
}

model Profile {
  id               String     @id @default(uuid())
  nameAsNid        String
  nationalIdNumber String
  gender           UserGender
  dateOfBirth      DateTime
  avatar           String? // URL to profile picture
  address          String?
  city             String
  user             User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId     String     @unique

  @@map("profiles")
}

